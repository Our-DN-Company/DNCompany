<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.dncompany.mapper.help.HelpMapper">

    <!-- 도와주세요 게시글 등록 -->
    <insert id="insertHelp" parameterType="HelpRequestDTO">
        <selectKey keyProperty="helpId" resultType="long" order="BEFORE">
            SELECT SEQ_HELP_BOARD.nextval FROM DUAL
        </selectKey>
        INSERT INTO HELP_BOARD(HELP_ID, HELP_TITLE, HELP_SPECIES, HELP_CARE_TYPE, HELP_CARE_DATE, HELP_START_TIME, HELP_END_TIME, HELP_ADDRESS, HELP_ADDRESS_DETAIL, HELP_PRICE, HELP_POINT, USERS_ID)
        VALUES (#{helpId, jdbcType=NUMERIC}, #{helpTitle, jdbcType=VARCHAR}, #{helpSpecies, jdbcType=VARCHAR}, #{helpCareType, jdbcType=VARCHAR}, #{helpCareDate, jdbcType=DATE}, #{helpStartTime, jdbcType=TIMESTAMP}, #{helpEndTime, jdbcType=TIMESTAMP}, #{helpAddress, jdbcType=VARCHAR}, #{helpAddressDetail, jdbcType=VARCHAR}, #{helpPrice, jdbcType=NUMERIC}, #{helpPoint, jdbcType=NUMERIC}, #{usersId, jdbcType=NUMERIC})
    </insert>

    <!-- 도와주세요 게시글 목록 조회 -->
    <select id="selectHelpList" resultType="HelpListDTO">
        SELECT HELP_ID, HELP_TITLE, HELP_CARE_TYPE, HELP_ADDRESS, HELP_POINT, HELP_PRICE, HELP_CARE_DATE, HELP_CREATED_AT
        FROM HELP_BOARD
        ORDER BY HELP_CREATED_AT DESC
    </select>

    <!-- 도와주세요 게시글 상세 조회 -->
    <select id="selectHelpDetail" resultType="HelpResponseDTO">
        SELECT HELP_ID, HELP_TITLE, HELP_SPECIES, HELP_CARE_TYPE, HELP_CARE_DATE,
            HELP_START_TIME, HELP_END_TIME, HELP_ADDRESS, HELP_ADDRESS_DETAIL, HELP_PRICE, HELP_POINT,
            USERS_ID, HELP_CREATED_AT
        FROM HELP_BOARD
        WHERE HELP_ID = #{helpId}
    </select>

</mapper>