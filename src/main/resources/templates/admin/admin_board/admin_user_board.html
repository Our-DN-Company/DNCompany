<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>회원 관리</title>
  <link th:href="@{/css/admin/admin_board/admin_user_board.css}" rel="stylesheet"/>
</head>
<body>

<!-- 공통 헤더 -->
<div id="header-container" th:replace="admin/admin_main/admin_main_header_nav :: admin_main_header_nav"></div>

<div class="member-management">
  <h3>회원 관리</h3>
  <form id="searchForm" method="post" th:action="@{/admin/user/board/list/data}">
    <div class="filter">
      <label for="idInput">아이디:</label>
      <input id="idInput" name="userId" placeholder="아이디를 입력하세요" type="text">
    </div>
    <div class="filter">
      <label for="nameInput">이름:</label>
      <input id="nameInput" name="name" placeholder="이름을 입력하세요" type="text">
    </div>
    <div class="filter">
      <label for="ageInput">나이:</label>
      <input id="ageInput" name="age" placeholder="나이를 입력하세요" type="text">
    </div>
    <div class="filter">
      <label for="genderSelect">성별:</label>
      <select id="genderSelect" name="gender">
        <option value="all">전체</option>
        <option value="male">남성</option>
        <option value="female">여성</option>
      </select>
    </div>
    <div class="filter">
      <label for="phoneInput">폰번호:</label>
      <input id="phoneInput" name="phoneNumber" placeholder="폰번호를 입력하세요" type="text">
    </div>
    <div class="filter">
      <label for="joinDate">가입일:</label>
      <input id="joinDate" name="signUpDate" type="date">
    </div>
    <div class="filter">
      <label for="reportStatus">신고 여부:</label>
      <select id="reportStatus" name="reportCount">
        <option value="all">전체</option>
        <option value="reported">신고된 회원</option>
        <option value="notReported">신고되지 않은 회원</option>
      </select>
    </div>
    <div class="filter">
      <button type="submit" class="search-button">검색</button>
    </div>
  </form>
</div>

<div class="member-list">
  <div class="member-list-header">
    <h3>전체 회원 목록</h3>
    <div class="header-controls">
      <select id="itemsPerPage">
        <option value="10">10개씩 보이기</option>
        <option value="20">20개씩 보이기</option>
        <option value="50">50개씩 보이기</option>
      </select>
      <button class="apply-button" id="applyButton">회원정보 수정 전체적용</button>
    </div>
  </div>
  <table>
    <thead>
    <tr>
      <th><input type="checkbox" id="selectAll"></th>
      <th>번호</th>
      <th>아이디</th>
      <th>이름</th>
      <th>주소</th>
      <th>폰번호</th>
      <th>생년월일</th>
      <th>성별</th>
      <th>가입일</th>
      <th>신고 횟수</th>
      <th>보유 포인트</th>
      <th>포인트 수정</th>
      <th>활동 정지</th>
    </tr>
    </thead>
    <tbody id="memberListBody">
    <!-- Thymeleaf가 서버에서 데이터를 렌더링합니다 -->
    <tr th:each="user : ${userList}">
      <td><input type="checkbox"></td>
      <td th:text="${user.userId}"></td>
      <td th:text="${user.loginId}"></td>
      <td th:text="${user.name}"></td>
      <td th:text="${user.address}"></td>
      <td th:text="${user.phoneNumber}"></td>
      <td th:text="${user.birthDate}"></td>
      <td th:text="${user.gender}"></td>
      <td th:text="${user.signUpDate}"></td>
      <td th:text="${user.reportCount}"></td>
      <td><span class="current-points" th:text="${user.points}"></span></td>
      <td>
        <input type="number" min="1" placeholder="포인트" class="small-input" id="point-${user.userId}">
        <button onclick="applyCustomPoints(${user.userId})" class="blue-button">적용</button>
      </td>
      <td class="activity-buttons">
        <button onclick="applyBan(${user.userId}, 1)" class="blue-button">1일</button>
        <button onclick="applyBan(${user.userId}, 3)" class="blue-button">3일</button>
        <button onclick="applyBan(${user.userId}, 7)" class="blue-button">7일</button>
        <div class="ban-input">
          <input type="number" min="1" placeholder="일수" id="ban-${user.userId}">
          <button onclick="applyCustomBan(${user.userId})" class="blue-button">적용</button>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
</div>

<!-- 모달 -->
<div id="modal" style="display:none;">
  <div class="modal-content">
    <span class="close">&times;</span>
    <p id="modal-text"></p>
    <button id="confirmButton">확인</button>
  </div>
</div>

<script th:src="@{/js/admin/admin_board/admin_user_board.js}"></script>
</body>
</html>
